---

import { profileConfig, siteConfig } from "../config";
import { url } from "../utils/url-utils";

const currentYear = new Date().getFullYear();
// 计算已运行天数（含首日），当 `siteConfig.startDate` 为 YYYY-MM-DD 时生效
const runningDays = (() => {
	const s = siteConfig.startDate;
	if (!s) return null;
	const parts = s.split("-").map((v) => Number(v));
	if (parts.length !== 3 || parts.some((n) => Number.isNaN(n))) return null;
	const startUtc = new Date(Date.UTC(parts[0], parts[1] - 1, parts[2]));
	const now = new Date();
	const todayUtc = new Date(
		Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate()),
	);
	const msPerDay = 24 * 60 * 60 * 1000;
	const diff =
		Math.floor((todayUtc.getTime() - startUtc.getTime()) / msPerDay) + 1;
	return Number.isFinite(diff) && diff >= 0 ? diff : null;
})();
---

<!--<div class="border-t border-[var(&#45;&#45;primary)] mx-16 border-dashed py-8 max-w-[var(&#45;&#45;page-width)] flex flex-col items-center justify-center px-6">-->
<div class="transition border-t border-black/10 dark:border-white/15 my-10 border-dashed mx-32"></div>
<!--<div class="transition bg-[oklch(92%_0.01_var(&#45;&#45;hue))] dark:bg-black rounded-2xl py-8 mt-4 mb-8 flex flex-col items-center justify-center px-6">-->
<div class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] dark:border-white/15 rounded-2xl mb-12 flex flex-col items-center justify-center px-6">
    <div class="transition text-50 text-sm text-center">
        &copy; <span id="copyright-year">{currentYear}</span> {profileConfig.name}. All Rights Reserved. /
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href={url('rss.xml')}>RSS</a> /
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href={url('sitemap-index.xml')}>Sitemap</a><br>
        Powered by
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://astro.build">Astro</a> &
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/saicaca/fuwari">Fuwari</a>
    </div>
    {siteConfig.beian ? (
        <div class="transition text-50 text-sm text-center mt-2">
            <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://beian.miit.gov.cn/">{siteConfig.beian}</a>
        </div>
    ) : null}
	{runningDays !== null ? (
		<div class="transition text-50 text-sm text-center mt-2">已运行 {runningDays} 天</div>
	) : null}
</div>